Raspberry Pi 5 と、Raspberry Pi AI Cameraを利用して、ある領域に入った人数をカウントする、ローカルで動作するWEBアプリを作りたいと思っています。
具体的に言うと、人が一方通行で流れる廊下のような環境で、あるラインを横切った人数をカウントしたり、毎分どれくらいの人が入ったかをグラフとして表示したいと思っています。

AI CameraにはMobileDetのObject Detectionのモデルを利用し、以下のようなファイルが、/home/pi/resultsに1秒間に4~6回ほどYYYYMMDDHHmmSSsss.jsonとして溜まっていくことを想定しています。
```
{
    "time": "20250303145302409",
    "detections": [
        {
            "label": "person",
            "confidence": 0.77734375,
            "left": 625.0,
            "top": 0.0,
            "right": 44.0,
            "bottom": 470.0
        },
        {
            "label": "tie",
            "confidence": 0.5,
            "left": 482.0,
            "top": 132.0,
            "right": 257.0,
            "bottom": 385.0
        }
    ]
}
```

GitHubでは、Picamera2というレポジトリ内で、AI Cameraを利用したObject Detectionのサンプルデモが公開されているのでそれを参考にしてください。

私はPythonであれば理解できるので、Pythonで動作するアプリとしてください。

私がアプリに必要な機能は以下のようだと解釈していますが、過不足がないか考え、あればコードを出力する前に私に聞いてください。
① IMX500に対して人物を検知することが出来るObject Detectionモデルをデプロイする
② 推論を開始する
③ 推論結果をJSON形式であるディレクトリに出力する
④ あるディレクトリを監視し、出力されたJSONをもとに、領域内に入った人数をカウントするロジックを持つWEBアプリケーションを構築する

実現したいWEBアプリは以下のようなものです
・シンプルだが、スタイリッシュなUI
・アプリのコンポーネントは、現状の検出結果などを描画するキャンバスと、時系列の検出結果と、設定項目(閾値の設定スライダー、カウントのリセット、更新頻度)
・キャンバスと時系列のグラフは上下になっており、設定項目欄は右側にある状態
・キャンバスには、検知している人のバウンディングボックス、同一と判断している人物の移動の軌跡、そこを超えたらカウントを増やす判定の線を描画してください
・時系列のグラフは棒グラフで、直近50点のカウント人数を描画してください

Object Detectionは個別の人物を識別できないので、直前の検出結果と比較してをもとに、バウンディングボックスの大きさの変化、中心点の移動距離、を活用して、同一の人物であると推測してください。
例えば、急に画面の端から端まで移動することはないので、次のフレームで画面サイズの10%動いたら同一とみなさない、バウンディングボックスの大きさが急に半分になったら同一とみなさない、などです。この数字はあくまで一例です。

その他、要件などをいくつか記載します
・Uターンしてもう一度ラインを超えた人は再カウントしないようにしてください
・検出結果は640x480の座標で出力されます
・ファイル構成は自由ですが、最終的には python app.py で起動できる状態だと嬉しいです
・検出結果の精度は100%ではなく、欠損することもあるので、欠損したとしてもトラッキングができるように考えてください。
・また、更新頻度は200~400ms程度であることを考慮してください。
・画面のデフォルトの更新頻度は300msにしてください
・カメラから推論結果を取得してJSONを保存する機能も含んでください
・利用する技術や、構成はシンプルかつ複雑でないものを希望します
・FHDのモニターで見たときに1画面で情報がすべて収まるようになっていてほしく、また可能であればスマホで見たときには適切に配置などが変わってほしいと思っています

どのようなWEBアプリになるか考えたうえで、作成する前にどのようなものになるか教えてください。
また、製作するにあたって不明な要素などあれば気兼ねなく聞いてください。

